{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/Point.js","webpack:///./src/main.js","webpack:///./src/ChessGame.js","webpack:///./src/logic/transform.js","webpack:///./src/logic/GameLogic.ts","webpack:///./src/utils/copyArray.js","webpack:///./src/ChessData.js","webpack:///./src/components/Chess.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","x","y","this","chess","require","initMap","init","document","getElementsByTagName","addEventListener","initEvent","REDPLAYER","BLACKPLAYER","localPlayer","chessAry","Array","Map","myCanvas","getElementById","context","getContext","qipan","shuai","jiang","message_txt","transfrom","chessData","myChess","draw","drawImage","j","showPic","doMouseDown","e","goal","bbox","getBoundingClientRect","left","width","top","height","getPointOnCanvas","pageX","pageY","tempx","parseInt","Math","floor","C_OFFX","C_INTERVAL","tempy","innerHTML","selected","undefined","player","isMyChess","m_lastCard","drawSelectedChess","isAbleTo","originx","pos","originy","SetPos","setMap","style","display","stageClick","faction","color","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","length","Chess","err","forEach","cell","initChess","moveMaster","MoveMaster","Point","copyArray","transformItem","index","red","match","ary","point","back","transformPoint","map","copy","positionTransform","row","rowIndex","valueTransform","updateMap","side","chessName","bossMove","binMove","shiMove","xiangMove","maMove","juMove","paoMove","SIDE","pass","direction","sign","RED","target","push","concat","paoMove_","adjust","_this","col","rowAdd","colAdd","q","w","eat","fastMove","maMove_","x1","y1","col1","row1","col2","row2","xiangMove_","originX","originY","shiMove_","limitUpY","limitDownY","targetX","targetY","cellIndex","console","log","count","black","chesspos","img1","img2","lineWidth","strokeStyle","beginPath","rect","stroke"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","//棋盘点类\r\nfunction Point(x, y) {\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n}\r\nmodule.exports = Point;","//游戏入口\r\n\r\n//游戏输赢，用策略模式去实现\r\n\r\nvar chess = require('./ChessGame.js');\r\n\r\nchess.initMap();\r\nchess.init();\r\n\r\ndocument.getElementsByTagName(\"body\")[0].addEventListener(\"click\", chess.initEvent, false);","var REDPLAYER = 1;\r\nvar BLACKPLAYER = 2;\r\n\r\nvar localPlayer = REDPLAYER; // localPlayer记录自己是红方还是黑方\r\nvar chessAry = new Array(32);\r\nvar Map = new Array();\r\nvar myCanvas = document.getElementById('myCanvas');\r\nvar context = myCanvas.getContext('2d');\r\nvar qipan = document.getElementById('qipan');\r\nvar shuai = document.getElementById(\"Info1\");\r\nvar jiang = document.getElementById(\"Info2\");\r\nvar message_txt = document.getElementById('message_txt');\r\n\r\n//棋盘点类\r\nvar Point = require('./utils/Point.js');\r\n//走棋规则\r\nvar transfrom = require('./logic/transform.js');\r\n\r\n//初始化棋盘\r\nfunction initMap() {\r\n\tvar i,j;\r\n\tfor (i = 0; i < 9; i++) {\r\n\t\tMap[i] = new Array();\r\n\t\tfor (j = 0; j < 10; j++) {\r\n\t\t\tMap[i][j] = -1;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//初始化\r\nfunction init() {\r\n\tinitChess();\r\n\tshuai.style.display = \"block\";\r\n\tjiang.style.display = \"none\";\r\n\tmyCanvas.addEventListener('mousedown', doMouseDown, false);\r\n}\r\n\r\nconst chessData = require('./ChessData');\r\nvar myChess = require('./components/Chess.js');\r\n\r\nfunction initChess() {\r\n\t// console.log(chessData);\r\n\tfor (const name in chessData) {\r\n\t\tvar faction = chessData[name]; //红以及黑\r\n\t\tvar color = name == \"red\" ? 1 : 2;\r\n\t\tfor (var chess of faction) {\r\n\t\t\tfor (var n = 0; n < chess.pos.length; n++) {\r\n\t\t\t\tvar c = new myChess.Chess(color, chess.name, chess.pos[n]);\r\n\t\t\t\tchessAry[chess.value + n] = c;\r\n\t\t\t\t//棋盘上用值代表棋子\r\n\t\t\t\tMap[chess.pos[n].x][chess.pos[n].y] = chess.value + n;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\ttransfrom.setMap(Map);\r\n\tdrawAll();\r\n\t// console.log(Map);\r\n\t// console.log(chessAry);\r\n}\r\n\r\n/**\r\n * 绘制棋盘和三十二颗棋子\r\n */\r\nfunction drawAll() {\r\n\t//棋盘\r\n\tcontext.drawImage(qipan, 0, 0);\r\n\tchessAry.forEach(cell => {\r\n\t\tcell.showPic(context);\r\n\t})\r\n}\r\n\r\n/**\r\n * 绘制剩下的棋子\r\n */\r\nfunction draw() {\r\n\tcontext.drawImage(qipan, 0, 0);\r\n\tfor (var i = 0; i < 9; i++) {\r\n\t\tfor (var j = 0; j < 10; j++) {\r\n\t\t\tif (Map[i][j] != -1) { //此处有棋子\r\n\t\t\t\tchessAry[Map[i][j]].showPic(context);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction doMouseDown(e) {\r\n\tvar x = e.pageX;\r\n\tvar y = e.pageY;\r\n\tvar goal = getPointOnCanvas(x, y);\r\n\tstageClick(goal.x, goal.y);\r\n\r\n}\r\n\r\nfunction getPointOnCanvas(x, y) {\r\n\tvar bbox = myCanvas.getBoundingClientRect();\r\n\treturn {\r\n\t\tx: x - bbox.left * (myCanvas.width / bbox.width ),\r\n\t\ty: y - bbox.top * (myCanvas.height / bbox.height )\r\n\t}\r\n}\r\n\r\nvar m_lastCard = null;\r\n\r\nfunction stageClick(x, y) {\r\n\tvar tempx = parseInt(Math.floor(x - myChess.C_OFFX) / myChess.C_INTERVAL),\r\n\t\ttempy = parseInt(Math.floor(y - myChess.C_OFFX) / myChess.C_INTERVAL);\r\n\r\n\tif (tempx < 0 || tempx > 8 || tempy < 0 || tempy > 9) {\r\n\t\tmessage_txt.innerHTML = \"x: \" + tempx + \", y:\" + tempy;\r\n\t\treturn;\r\n\t}\r\n\tvar selected = chessAry[Map[tempx][tempy]];\r\n\t// if (selected == null) {\r\n\t// \tlet str = \"\";\r\n\t// \tif (m_lastCard) {\r\n\t// \t\tstr = \"请选择目标棋子\";\r\n\t// \t} else {\r\n\t// \t\tstr = \"请选择准备移动的棋子\";\r\n\t// \t}\r\n\t// \tmessage_txt.innerHTML = str;\r\n\t// \treturn;\r\n\t// }\r\n\tif (isMyChess(selected)) { //点击自己的棋子\r\n\t\t// if (isMyChess(selected)) {\r\n\t\t\tif (m_lastCard) {\r\n\t\t\t\t//原来的m_lastCard要变回正常\r\n\t\t\t\tdraw();\r\n\t\t\t}\r\n\t\t\tm_lastCard = selected;\r\n\t\t\tm_lastCard.drawSelectedChess(context);\r\n\t\t// } else {\r\n\t\t// \tmessage_txt.innerHTML = \"请选择准备移动的棋子\";\r\n\t\t// \treturn;temp代表选中的\r\n\t\t// }\r\n\t} else { //点击的不是自己的棋子\r\n\t\tif (m_lastCard) {\r\n\t\t\tif (transfrom.isAbleTo(m_lastCard, tempx, tempy)) { //是否符合走棋规则\r\n\t\t\t\tvar originx = m_lastCard.pos.x,\r\n\t\t\t\t\toriginy = m_lastCard.pos.y;\r\n\t\t\t\tvar goal = Map[tempx][tempy];\r\n\t\t\t\t//新地点等于m-laster\r\n\t\t\t\tMap[tempx][tempy] = Map[originx][originy];;\r\n\t\t\t\tMap[originx][originy] = -1;\r\n\t\t\t\tm_lastCard.SetPos(tempx, tempy);\r\n\t\t\t\ttransfrom.setMap(Map);\r\n\t\t\t\tdraw();\r\n\t\t\t\tchangePlay();\r\n\r\n\t\t\t\tif (goal == 0) {\r\n\t\t\t\t\tmessage_txt.innerHTML = \"红方赢了\";\r\n\t\t\t\t}\r\n\t\t\t\tif (goal == 16) {\r\n\t\t\t\t\tmessage_txt.innerHTML = \"黑方赢了\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t} else {\r\n\t\t\t\tmessage_txt.innerHTML = \"不符合走动规则\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmessage_txt.innerHTML = \"请选择准备移动的棋子\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nfunction isMyChess(c) {\r\n\tif (c == undefined) return false;\r\n\tif (c.player != localPlayer) {\r\n\t   message_txt.innerHTML=\"单击成对方棋子了!\"\r\n\t   return false;\t\t\t   \r\n\t}\r\n\treturn true;\r\n} \r\n\r\nfunction changePlay() {\r\n\tif (localPlayer == REDPLAYER) {\r\n\t\tlocalPlayer = BLACKPLAYER;\r\n\t\tshuai.style.display = \"none\";\r\n\t\tjiang.style.display = \"block\";\r\n\t} else {\r\n\t\tlocalPlayer = REDPLAYER;\r\n\t\tshuai.style.display = \"block\";\r\n\t\tjiang.style.display = \"none\";\r\n\t}\r\n}\r\n\r\nmodule.exports = {\r\n\tinitMap: initMap,\r\n\tinit: init,\r\n\tinitEvent: doMouseDown\r\n}","// import * as move from './GameLogic.ts';\r\nvar move = require('./GameLogic.ts')\r\nvar moveMaster = new move.MoveMaster();\r\nvar Point = require('../utils/Point.js');\r\nvar copyArray = require('../utils/copyArray.js');\r\n//\r\n\r\nfunction setMap(map) {\r\n\t//位置转化\r\n\tvar copy = positionTransform(map);\r\n\t// var copy = copyArray(map);\r\n\t//数值转化\r\n\tvalueTransform(copy);\r\n\t\r\n\t\r\n\tmoveMaster.updateMap(copy);\r\n}\r\n\r\nfunction positionTransform(map) {\r\n\tvar copy = copyArray(map);\r\n\r\n\t//转化map;\r\n\t//去除第一行以及第一列\r\n\t// copy.forEach((value, index) => {\r\n\t// \tfor (let n = 0; n < value.length / 2; n++) {\r\n\t// \t\tlet temp = value[n];\r\n\t// \t\tcopy[index][n] = copy[index][copy[index].length - 1 - n]; \r\n\t// \t\tcopy[index][copy[index].length - 1 - n] = temp;\r\n\t// \t}\r\n\t// });\r\n\treturn copy;\r\n}\r\n\r\nfunction valueTransform(map) {\r\n\tmap.forEach(function(row, rowIndex) {\r\n\t\tmap[rowIndex] = row.map(transformItem);\r\n\t})\r\n}\r\n\r\nfunction transformItem(value, index) {\r\n\tvar red = value < 16 ? -1 : 1;\r\n\tvar trans = value < 16 ? value : value - 16;\r\n\tswitch(trans) {\r\n\t\tcase 0: {\r\n\t\t\treturn red * 7;\r\n\t\t}\r\n\t\tcase 1:\r\n\t\tcase 2: {\r\n\t\t\treturn red * 6;\r\n\t\t}\r\n\t\tcase 3:\r\n\t\tcase 4: {\r\n\t\t\treturn red * 5;\r\n\t\t}\r\n\t\tcase 5:\r\n\t\tcase 6: {\r\n\t\t\treturn red * 4;\r\n\t\t}\r\n\t\tcase 7:\r\n\t\tcase 8: {\r\n\t\t\treturn red * 3;\r\n\t\t}\r\n\t\tcase 9:\r\n\t\tcase 10: {\r\n\t\t\treturn red * 2;\r\n\t\t}\r\n\t\tcase 11:\r\n\t\tcase 12:\r\n\t\tcase 13:\r\n\t\tcase 14:\r\n\t\tcase 15: {\r\n\t\t\treturn red * 1;\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n\r\nfunction isAbleTo(chess, x, y) {\r\n\tvar side = chess.player == 1 ? 1 : 0;\r\n\tvar ary = [];\r\n\tvar point = transformPoint(chess.pos.x, chess.pos.y);\r\n\tvar goal = transformPoint(x, y);\r\n\tswitch(chess.chessName) {\r\n\t\tcase \"将\":\r\n\t\tcase \"帅\": {\r\n\t\t\tary = moveMaster.bossMove(point,side);\r\n\t\t\treturn match(ary, goal);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"兵\":\r\n\t\tcase \"卒\": {\r\n\t\t\tary = moveMaster.binMove(point,side);\r\n\t\t\treturn match(ary, goal);\r\n\t\t\t// return moveMaster.binMove(transformPoint(x, y),side) != 0 ? true : false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"仕\":\r\n\t\tcase \"士\": {\r\n\t\t\tary = moveMaster.shiMove(point,side);\r\n\t\t\treturn match(ary, goal);\r\n\t\t\t// return moveMaster.shiMove(transformPoint(x, y),side) != 0 ? true : false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"象\":\r\n\t\tcase \"相\": {\r\n\t\t\tary = moveMaster.xiangMove(point,side);\r\n\t\t\treturn match(ary, goal);\r\n\t\t\t// return moveMaster.xiangMove(transformPoint(x, y),side) != 0 ? true : false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"马\": {\r\n\t\t\tary = moveMaster.maMove(point,side);\r\n\t\t\treturn match(ary, goal);\r\n\t\t\t// return moveMaster.maMove(transformPoint(x, y),side) != 0 ? true : false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"车\": {\r\n\t\t\tary = moveMaster.juMove(point,side);\r\n\t\t\treturn match(ary, goal);\r\n\t\t\t// return moveMaster.juMove(transformPoint(x, y),side) != 0 ? true : false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase \"炮\": {\r\n\t\t\tary = moveMaster.paoMove(point,side);\r\n\t\t\treturn match(ary, goal);\r\n\t\t\t// return moveMaster.paoMove(transformPoint(x, y),side) != 0 ? true : false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * 数组中是否有匹配的点\r\n */\r\nfunction match(ary, point) {\r\n\t//forEach value\r\n\tvar back = false;\r\n\tary.forEach(value => {\r\n\t\tif (value.x == point.x && value.y == point.y) {\r\n\t\t\tback = true;\r\n\t\t}\r\n\t})\r\n\treturn back;\r\n}\r\n\r\n\r\n\r\nfunction transform(map) {\r\n\tvar row = [];\r\n\tfor (var n = 0; n <= 10; n++) {\r\n\t\trow.push(-1);\r\n\t}\r\n\tmap.forEach(function (row) {\r\n\t\trow.unshift(-1);\r\n\t});\r\n\tmap.unshift(row);\r\n\treturn map;\r\n}\r\n\r\nfunction transformPoint(x, y) {\r\n\t//x、y的转化以及数值的转化\r\n\t//0,0 -> 0,0\r\n\treturn new Point(x,  y);\r\n}\r\n\r\nmodule.exports = {\r\n\tsetMap: setMap,\r\n\tisAbleTo: isAbleTo\r\n}","\"use strict\";\r\n// namespace chess {\r\n/*\r\n* 移动位置控制器\r\n* */\r\nexports.__esModule = true;\r\nvar Point = require(\"../utils/Point.js\");\r\n// class Point {\r\n//     public x: number;\r\n//     public y: number;\r\n//     constructor(x, y) {\r\n//         this.x = x;\r\n//         this.y = y;\r\n//     }\r\n// }\r\nvar SIDE;\r\n(function (SIDE) {\r\n    SIDE[SIDE[\"BLACK\"] = 0] = \"BLACK\";\r\n    SIDE[SIDE[\"RED\"] = 1] = \"RED\";\r\n})(SIDE = exports.SIDE || (exports.SIDE = {}));\r\n/**\r\n * 象棋移动控制器\r\n * @function updateMap(): 设置棋局;map[9][10];左黑右红\r\n * @function [class]Move(point, side); 各类棋移动，point:棋子的位置,side：棋子的派别，1-红，0-黑;返回可以移动的位置\r\n */\r\nvar MoveMaster = /** @class */ (function () {\r\n    function MoveMaster() {\r\n    }\r\n    MoveMaster.prototype.updateMap = function (map) {\r\n        this.map = map;\r\n    };\r\n    /*\r\n    * 兵移动位置预测\r\n    * point:棋子的位置\r\n    * side:阵营\r\n    * return where can move\r\n    * */\r\n    MoveMaster.prototype.binMove = function (point, side) {\r\n        // console.log(test);\r\n        var back = [];\r\n        var pass, //标志是否过河\r\n        direction = 0, //方向\r\n        sign = side ? 1 : -1;\r\n        if (side == SIDE.RED) { //红色阵营\r\n            pass = point.y < 5; //y指的是行\r\n            direction = -1;\r\n        }\r\n        else {\r\n            pass = point.y > 4;\r\n            direction = 1;\r\n        }\r\n        if (point.y + direction >= 0 && point.y + direction <= this.map.length) {\r\n            if (this.map[point.x][point.y + direction] * sign <= 0) { //如果没有棋子或者是敌方棋子的情况下(0),相乘为负数\r\n                var target = new Point(point.x, point.y + direction);\r\n                back.push(target);\r\n            }\r\n        }\r\n        if (pass) {\r\n            //剔除越界的情况\r\n            if (point.x - 1 >= 0) {\r\n                if (this.map[point.x - 1][point.y] * sign <= 0) {\r\n                    back.push(new Point(point.x - 1, point.y));\r\n                }\r\n            }\r\n            if (point.x + 1 <= 8) {\r\n                if (this.map[point.x + 1][point.y] * sign <= 0) {\r\n                    back.push(new Point(point.x + 1, point.y));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // back.push(new egret.Point(point.x, point.y + direction));\r\n        }\r\n        return back;\r\n    };\r\n    /*\r\n    * 炮\r\n    * */\r\n    MoveMaster.prototype.paoMove = function (point, side) {\r\n        var back = [];\r\n        for (var direction = 0; direction < 4; direction++) {\r\n            back = back.concat(this.paoMove_(point, direction, side));\r\n        }\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.paoMove_ = function (point, direction, side) {\r\n        var _this = this;\r\n        var back = [];\r\n        var col = point.x, row = point.y;\r\n        var rowAdd = 0, colAdd = 0, sign = side ? 1 : -1; //\r\n        var adjust;\r\n        switch (direction) {\r\n            case 0:\r\n                adjust = function (q, w) { return q >= 0; };\r\n                colAdd = -1;\r\n                break;\r\n            case 1:\r\n                adjust = function (q, w) { return w >= 0; };\r\n                rowAdd = -1;\r\n                break;\r\n            case 2:\r\n                adjust = function (q, w) { return q < _this.map.length; };\r\n                colAdd = 1;\r\n                break;\r\n            case 3:\r\n                adjust = function (q, w) { return w < _this.map[0].length; };\r\n                rowAdd = 1;\r\n                break;\r\n        }\r\n        var eat = false;\r\n        while (true) {\r\n            if (!adjust(col, row))\r\n                break; //检测到边界循环结束\r\n            if (col == point.x && row == point.y) {\r\n                col += colAdd;\r\n                row += rowAdd;\r\n                continue;\r\n            }\r\n            if (this.map[col][row] == 0) { //该位置没有棋子\r\n                if (!eat)\r\n                    back.push(new Point(col, row));\r\n            }\r\n            else { //如果有棋子，那么跳过此位置，遍历能吃的敌方棋子\r\n                if (eat) {\r\n                    if (this.map[col][row] * sign < 0) { //如果是敌方棋子，吃。否则直接break\r\n                        back.push(new Point(col, row));\r\n                        eat = false;\r\n                    }\r\n                    break;\r\n                }\r\n                eat = true;\r\n            }\r\n            row += rowAdd;\r\n            col += colAdd;\r\n        }\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.juMove = function (point, side) {\r\n        var back = [];\r\n        for (var row = point.y; row >= 0; row--) { //行减遍历\r\n            if (row == point.y)\r\n                continue;\r\n            if (!this.fastMove(new Point(point.x, row), side, back))\r\n                break;\r\n        }\r\n        for (var col = point.x; col >= 0; col--) {\r\n            if (col == point.x)\r\n                continue;\r\n            if (!this.fastMove(new Point(col, point.y), side, back))\r\n                break;\r\n        }\r\n        for (var row = point.y; row < this.map[0].length; row++) {\r\n            if (row == point.y)\r\n                continue;\r\n            if (!this.fastMove(new Point(point.x, row), side, back))\r\n                break;\r\n        }\r\n        for (var col = point.x; col < this.map.length; col++) {\r\n            if (col == point.x)\r\n                continue;\r\n            if (!this.fastMove(new Point(col, point.y), side, back))\r\n                break;\r\n        }\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.fastMove = function (point, side, back) {\r\n        var sign = side ? 1 : -1;\r\n        if (this.map[point.x][point.y] == 0) {\r\n            back.push(new Point(point.x, point.y));\r\n            return true;\r\n        }\r\n        else {\r\n            if (this.map[point.x][point.y] * sign < 0) {\r\n                back.push(new Point(point.x, point.y));\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n    MoveMaster.prototype.maMove = function (point, side) {\r\n        //按照撇脚方位计算，四个撇脚分别为\r\n        var back = [];\r\n        back = back.concat(this.maMove_(point, side, -1, 0));\r\n        back = back.concat(this.maMove_(point, side, 1, 0));\r\n        back = back.concat(this.maMove_(point, side, 0, -1));\r\n        back = back.concat(this.maMove_(point, side, 0, 1));\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.maMove_ = function (point, side, x, y) {\r\n        var back = [], sign = side ? 1 : -1;\r\n        if (point.x + x >= 0 && point.x + x < this.map.length && point.y + y >= 0 && point.y + y < this.map[0].length) {\r\n            if (this.map[point.x + x][point.y + y] == 0) {\r\n                var x1 = 0, y1 = 0;\r\n                if (x == 0) {\r\n                    x1 = -1;\r\n                }\r\n                else {\r\n                    y1 = -1;\r\n                }\r\n                var col1 = point.x + 2 * x - x1, row1 = point.y + 2 * y - y1;\r\n                if (col1 >= 0 && col1 < this.map.length && row1 >= 0 && row1 < this.map[0].length) {\r\n                    if (this.map[col1][row1] * sign <= 0) {\r\n                        back.push(new Point(col1, row1));\r\n                    }\r\n                }\r\n                var col2 = point.x + 2 * x + x1, row2 = point.y + 2 * y + y1;\r\n                if (col2 >= 0 && col2 < this.map.length && row2 >= 0 && row2 < this.map[0].length) {\r\n                    if (this.map[col2][row2] * sign <= 0) {\r\n                        back.push(new Point(col2, row2));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.xiangMove = function (point, side) {\r\n        var back = [];\r\n        //原理同马，四个撇脚位置\r\n        back = back.concat(this.xiangMove_(point, side, 1, 1));\r\n        back = back.concat(this.xiangMove_(point, side, -1, 1));\r\n        back = back.concat(this.xiangMove_(point, side, -1, -1));\r\n        back = back.concat(this.xiangMove_(point, side, 1, -1));\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.xiangMove_ = function (point, side, x, y) {\r\n        var back = [];\r\n        var sign = side ? 1 : -1;\r\n        var originX = point.x + x, originY = point.y + y;\r\n        if (originX >= 0 && originX < this.map.length && originY >= 0 && originY < this.map[0].length) {\r\n            if (this.map[originX][originY] == 0) {\r\n                if (this.map[point.x + 2 * x][point.y + 2 * y] * sign <= 0) {\r\n                    if (sign > 0) {\r\n                        if (point.y + 2 * y > 4) {\r\n                            back.push(new Point(point.x + 2 * x, point.y + 2 * y));\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (point.y + 2 * y < 5) {\r\n                            back.push(new Point(point.x + 2 * x, point.y + 2 * y));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.shiMove = function (point, side) {\r\n        var back = [];\r\n        //四个方向，方向规则不超过\r\n        back = back.concat(this.shiMove_(point, side, 1, 1));\r\n        back = back.concat(this.shiMove_(point, side, -1, 1));\r\n        back = back.concat(this.shiMove_(point, side, -1, -1));\r\n        back = back.concat(this.shiMove_(point, side, 1, -1));\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.shiMove_ = function (point, side, x, y) {\r\n        var back = [];\r\n        var sign = side ? 1 : -1;\r\n        var limitUpY, limitDownY;\r\n        if (side == SIDE.RED) {\r\n            limitUpY = 7;\r\n            limitDownY = 9;\r\n        }\r\n        else {\r\n            limitUpY = 0;\r\n            limitDownY = 2;\r\n        }\r\n        var targetX = point.x + x, targetY = point.y + y;\r\n        if (targetX >= 3 && targetX <= 5 && targetY >= limitUpY && targetY <= limitDownY) {\r\n            if (this.map[targetX][targetY] * sign <= 0) {\r\n                back.push(new Point(targetX, targetY));\r\n            }\r\n        }\r\n        return back;\r\n    };\r\n    MoveMaster.prototype.bossMove = function (point, side) {\r\n        var back = [];\r\n        back = back.concat(this.shiMove_(point, side, 1, 0));\r\n        back = back.concat(this.shiMove_(point, side, 0, 1));\r\n        back = back.concat(this.shiMove_(point, side, -1, 0));\r\n        back = back.concat(this.shiMove_(point, side, 0, -1));\r\n        return back;\r\n    };\r\n    return MoveMaster;\r\n}());\r\nexports.MoveMaster = MoveMaster;\r\n// }\r\n","//copy二维数组\r\nfunction copyArray(ary) {\r\n\tif (ary.length && ary[0].length) {\r\n\t\tlet copy = [];\r\n\t\tary.forEach((value, index) => {\r\n\t\t\t//value任然时数组\r\n\t\t\tcopy[index] = new Array();\r\n\t\t\tvalue.forEach((cell,cellIndex) => {\r\n\t\t\t\tcopy[index].push(cell);\r\n\t\t\t})\r\n\t\t})\r\n\t\treturn copy;\r\n\t} else {\r\n\t\tconsole.log(\"复制的并不是二维数组\");\r\n\t\tconsole.log(ary);\r\n\t\treturn ary;\r\n\t}\r\n}\r\n\r\nmodule.exports = copyArray;","const Point = require('./utils/Point.js');\r\n\r\nmodule.exports = {\r\n\tred: [\r\n\t\t{\r\n\t\t\tname: \"兵\",\r\n\t\t\tcount: 5,\r\n\t\t\tpos: [new Point(0, 6), new Point(2, 6),new Point(4, 6), new Point(6, 6), new Point(8, 6)],\r\n\t\t\tvalue: 27\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"炮\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(1, 7), new Point(7, 7)],\r\n\t\t\tvalue: 25\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"车\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(0, 9), new Point(8, 9)],\r\n\t\t\tvalue: 23\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"马\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(1, 9), new Point(7, 9)],\r\n\t\t\tvalue: 21\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"相\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(2, 9), new Point(6, 9)],\r\n\t\t\tvalue: 19\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"士\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(3, 9), new Point(5, 9)],\r\n\t\t\tvalue: 17\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"帅\",\r\n\t\t\tcount: 1,\r\n\t\t\tpos: [new Point(4, 9)],\r\n\t\t\tvalue: 16\r\n\t\t}\r\n\t],\r\n\tblack: [\r\n\t\t{\r\n\t\t\tname: \"卒\",\r\n\t\t\tcount: 5,\r\n\t\t\tpos: [new Point(0, 3), new Point(2, 3),new Point(4, 3), new Point(6, 3), new Point(8, 3)],\r\n\t\t\tvalue: 11\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"炮\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(1, 2), new Point(7, 2)],\r\n\t\t\tvalue: 9\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"车\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(0, 0), new Point(8, 0)],\r\n\t\t\tvalue: 7\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"马\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(1, 0), new Point(7, 0)],\r\n\t\t\tvalue: 5\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"象\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(2, 0), new Point(6, 0)],\r\n\t\t\tvalue: 3\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"仕\",\r\n\t\t\tcount: 2,\r\n\t\t\tpos: [new Point(3, 0), new Point(5, 0)],\r\n\t\t\tvalue: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"将\",\r\n\t\t\tcount: 1,\r\n\t\t\tpos: [new Point(4, 0)],\r\n\t\t\tvalue: 0\r\n\t\t}\r\n\t]\r\n}","const REDPLAYER = 1;\r\nconst BLACKPLAYER = 2;\r\n\r\nconst C_INTERVAL = 76;\r\nconst C_OFFX = 24;\r\n\r\nfunction Chess(player, chessName, chesspos) {\r\n\tthis.player = player;\r\n\tthis.chessName = chessName;\r\n\tthis.pos = {};\r\n\tthis.SetPos(chesspos.x, chesspos.y);\r\n}\r\n\r\nChess.prototype.showPic = function(context) {\r\n\tif (this.player == REDPLAYER) {\r\n\t\tvar img1 = document.getElementById(\"Img\" + this.chessName);\r\n\t\tcontext.drawImage(img1, this.x, this.y);\r\n\t} else {\r\n\t\tvar img2 = document.getElementById(\"Img\" + this.chessName + 1);\r\n\t\tcontext.drawImage(img2, this.x, this.y);\r\n\t}\r\n}\r\n\r\nChess.prototype.SetPos = function(x, y) {\r\n\tthis.pos.x = x;\r\n\tthis.pos.y = y;\r\n\tthis.x = (this.pos.x) * C_INTERVAL + C_OFFX;\r\n\tthis.y = (this.pos.y) * C_INTERVAL + C_OFFX;\r\n}\r\n\r\nChess.prototype.drawSelectedChess = function(context) {\r\n\tcontext.lineWidth = 5;\r\n\tcontext.strokeStyle = \"red\";\r\n\tcontext.beginPath();\r\n\tcontext.rect(this.x - 2, this.y - 2, 65, 65);\r\n\tcontext.stroke();\r\n}\r\n\r\nmodule.exports = {\r\n\tChess: Chess,\r\n\tC_INTERVAL: C_INTERVAL,\r\n\tC_OFFX: C_OFFX\r\n};"],"sourceRoot":""}